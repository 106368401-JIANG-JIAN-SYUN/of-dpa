<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenFlow Data Plane Abstraction (OF-DPA) API Guide and Reference Manual: Comparative analysis example</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenFlow Data Plane Abstraction (OF-DPA) API Guide and Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="../../pages.html"><span>OF-DPA&#160;Documentation</span></a></li>
      <li><a href="../../modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/d4b/TE_INFO.html">OFDPA 1.0 Traffic Engineering Test Case</a></li><li class="navelem"><a class="el" href="../../d0/d9d/TE_OFDPA_VS_OPENFLOW1.html">OF-DPA + OpenFlow 1.3 Vs OpenFlow 1.0</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Comparative analysis example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Consider the following simple scenario:</p>
<div class="image">
<img src="../../SimpleScenario.jpg" alt="SimpleScenario.jpg"/>
</div>
 <ul>
<li>4 hosts are connected on 4 ports of a switch </li>
<li>Ingress traffic from all these 4 hosts is destined to a single IP destination address </li>
<li>The traffic has 4k layer 4 source ports</li>
</ul>
<p>To avoid congestion at the egress, the ingress traffic needs to be distributed and load balanced across a set of egress ports, let's take 4. Let us see what it takes to achieve this.</p>
<table  border="1">
<tr>
<th>Environment </th><th>No of tables </th><th>Configuration </th><th>Total number of flows required  </th></tr>
<tr>
<td><center>OpenFlow 1.0</center> </td><td><center>1</center> </td><td><ul>
<li>L4 source ports, the load balancing factor </li>
<li>Will need <b>1 flow entry for each micro flow</b> to load balance the traffic </li>
<li>Load balancing algorithm needs to run on the Controller  </li>
</ul>
</td><td><b><center>4K</center></b>  </td></tr>
<tr>
<td>OF-DPA + OpenFlow 1.3 </td><td><center>7</center> </td><td><ul>
<li><b>4 entries in the VLAN Flow table</b> to add the 4 ingress ports in the VLAN of the ingress traffic </li>
<li><b>1 entry in the Termination MAC Flow table</b> that configures the ingress traffic with the router MAC and VLAN </li>
<li><b>1 ECMP group with 4 next hops</b> (and the associated L2 Interface, L3 Unicast groups). This leverages ECMP capabilities of the hardware and the Controller is offloaded with this task </li>
<li><b>1 L3 Routing Table Flow entry</b> to match the IP destination and use the ECMP group as the next hop for the matching traffic.  </li>
</ul>
</td><td><b><center>6</center></b>  </td></tr>
</table>
<p>As is evident from the above table, it takes <b>6 flow entries with OF-DPA-OF1.3</b> compared to <b>4K entries in an OpenFlow 1.0</b> scenario.</p>
<p>As a step further, consider a scenario where the ECMP hashing leads to an uneven load distribution. This would result in few of the ECMP next hop egress ports getting congested while the rest are underutilized. The ACL Policy Flow table comes to the rescue which can be used to <b>engineer and redirect</b> the identified ingress traffic to underutilized egress ports. A flow entry for each of these elephant flows would need to be installed in the ACL Policy Flow table. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 1 2014 14:21:47 for OpenFlow Data Plane Abstraction (OF-DPA) API Guide and Reference Manual by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
