<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>OpenFlow Data Plane Abstraction (OF-DPA) API Guide and Reference Manual: Set up description</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenFlow Data Plane Abstraction (OF-DPA) API Guide and Reference Manual
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Welcome</span></a></li>
      <li class="current"><a href="../../pages.html"><span>OF-DPA&#160;Documentation</span></a></li>
      <li><a href="../../modules.html"><span>API&#160;Reference</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d6/d4b/TE_INFO.html">OFDPA 1.0 Traffic Engineering Test Case</a></li><li class="navelem"><a class="el" href="../../d2/d47/TE_USE_CASE.html">Traffic Engineering use case</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Set up description </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The set up consists of: </p>
<ul>
<li>A Switch running an OF-DPA based OpenFlow 1.3 Indigo agent. </li>
<li>A Ryu Controller communicating with the switch using OpenFlow 1.3 protocol. </li>
<li>IXIA ports connected to ports 1 through port 5 of the switch. </li>
<li>Port 1 receiving a long lived IPv4 traffic at 60% of the line rate with DestIP: 192.168.5.1 and SrcIP: 1.1.1.1. </li>
<li>Port 2 receiving a long lived IPv4 traffic at 60% of the line rate with DestIP: 192.168.5.2 and SrcIP: 2.2.2.2. </li>
<li>Port 5 receiving IPv4 traffic at 10% of the line rate with DestIP: 192.168.5.3 and incremental SrcIP. </li>
<li>Port 3 and port 4 as egress ports connected to IXIA.</li>
</ul>
<h1><a class="anchor" id="TE_USE_CASE_SET_UP_DESCRIPTION_SCENARIO_A"></a>
Scenario A, the problem</h1>
<p>The Ryu Controller configures an ECMP group in the switch with ports 3 and 4 as the next hops in the group to load balance traffic sent to this group.</p>
<p>This ECMP group is referenced by a Unicast Routing entry that routes all traffic destined to subnet 192.168.5.0 to this ECMP group.</p>
<p>Ports 1, 2 and 5 are the ingress ports receiving traffic from IXIA.</p>
<p>Traffic from port 5 is hashed and distributed across egress ports 3 and 4. This traffic is load balanced across the ECMP next hops.</p>
<p>Traffic from both port 1 and port 2 are hashed only to egress port 4. This results in port 4 getting subscribed beyond 120% of its transmit capacity and results in loss of traffic.</p>
<p>This is verified by the drops in the traffic captured on IXIA connected to ports 3 and 4.</p>
<h1><a class="anchor" id="TE_USE_CASE_SET_UP_DESCRIPTION_SCENARIO_B"></a>
Scenario B, the solution</h1>
<p>I Scenario A, egress port 4 gets congested as the ingress traffic from both port 1 and 2 hash to it. To solve the problem a more specific flow entry is installed that redirects one of the traffic streams to the port 3.</p>
<p>The Ryu Controller adds a flow entry in the ACL Policy table that matches traffic destined to 192.168.5.2 and routes it to port 3.</p>
<p>Thus the congested port 4 is relieved of excess traffic which is now re-routed to port 3 through traffic engineering. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 21 2014 17:10:13 for OpenFlow Data Plane Abstraction (OF-DPA) API Guide and Reference Manual by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
